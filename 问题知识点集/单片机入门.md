# 单片机入门

## 前言

有了电子电路和数字电路的基础知识，就可以开始学习嵌入式系统的核心元件——单片机。

## 1. 单片机的基本构成、工作原理

### 1.1 单片机是控制电子产品的大脑

现如今，我们生活中的许多电器都使用了单片机。例如：手机、电视机、冰箱、洗衣机、以及按下开关，LED 就闪烁的儿童玩具。那么，单片机在这些电器中究竟做了些什么呢？

单片机是这些电器动作的关键，**是指挥硬件运行的**。例如：接收按钮或按键的输入信号，按照事先编好的程序，指挥马达和 LCD 的外围功能电路动作。

单片机的构成（图 1）

![图1：单片机的构成要素](https://pic2.imgdb.cn/item/646466740d2dde577754f6b2.jpg)

> MCU：Micro Controller Unit，单片机的英文缩写。

单片机是由 CPU、内存、外围功能等部分组成的。如果将单片机比作人，那么 CPU 是负责思考的，内存是负责记忆的，外围功能相当于视觉的感官系统及控制手脚动作的神经系统。

尽管我们说 CPU 相当于人的大脑，但是它却不能像人的大脑一样，能有意识的、自发的思考。CPU 只能依次读取并执行事先存储在内存中的指令组合（程序）。当然 CPU 执行的指令并不是“走路”、“讲话”等高难度命令，而是一些非常简单的指令，像从内存的某个地方“读取数据”或把某个数据“写入”内存的某个地方，或做加法、乘法和逻辑运算等等。然而这些简单指令的组合，却能实现许多复杂的功能。

### 1.2 会思考的 CPU

![图2：CPU的作用](https://pic2.imgdb.cn/item/6465d5c60d2dde57770ccc3f.jpg)

#### 1.2.1 程序计数器

CPU 读取指令时需要知道要执行的指令保存在内存的什么位置，这个位置信息称为地址（相当于家庭住址）。程序计数器（PC）就是存储地址的寄存器。通常，PC 是按 1 递增设计的，也就是说，当 CPU 执行了 0000 地址中的指令后，PC 会自动加 1，变成 0001 地址。每执行一条指令 PC 都会自动加 1，指向下一条指令的地址。可以说，PC 决定了程序执行的顺序。

#### 1.2.2 指令解码电路

## 2. 单片机的外围功能电路

## 3. 单片机的编程语言和开发环境

## 4. 外围功能电路控制

## 5. 中断

## 6. 使用软仿真器的发开方法
