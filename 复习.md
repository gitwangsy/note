# 复习

[TOC]

## 1. C 基础

### 1.1 Ubuntu 的操作

#### 1.1.1 终端快捷键

打开终端方式:

- `Ctrl + Alt + T` 打开一个新的终端
- `Ctrl + Shift + T` 打开一个新的终端标签页（左右分屏，同路径）
- `Ctrl + Shift + N` 打开一个新的终端窗口（同路径）

终端字体调整：

- `Ctrl + Shift + +` 字体放大
- `Ctrl + -` 字体缩小

输入中文：

- `Ctrl + 空格` 切换输入法
- `shift` 切换中英文

#### 1.1.2 命令行提示符说明

`linux@ubuntu:~$`

- `linux` 当前登录的用户名
- `@` 分隔符
- `ubuntu` 主机名
- `:` 分隔符
- `~` 当前所在的目录，`~` 表示用户的家目录，`~` 也可以用绝对路径表示，如 `/home/linux`
- `$` 命令提示符，表示当前用户为普通用户，`#` 表示当前用户为超级用户(root)
  普通用户也可以通过 `sudo` 命令临时获取超级用户权限

命令行提示符可以通过修改 `PS1` 环境变量来修改显示的内容，修改后只对当前终端有效
`export PS1="xxx"` `export` 表示导出环境变量

```bash
PS1="\u@\h:\w\$"
```

- `\u` 当前登录的用户名
- `\h` 主机名
- `\w` 当前所在的目录

命令行高亮显示：

```bash
PS1="\[\e[1;31m\]\u@\h:\w\$ \[\e[0m\]"
```

- `\[\e[1;31m\]` 开始高亮显示，`1` 表示高亮显示，`31` 表示红色
- `\[\e[0m\]` 结束高亮显示

#### 1.1.3 Linux 文件系统

`/`：根目录，所有目录的起始点，一般不存放任何文件，只存放目录。

Linux 一级目录及其作用表：

| 目录        | 作用                                     |
| ----------- | ---------------------------------------- |
| /bin        | 存放系统命令                             |
| /boot       | 存放系统启动文件                         |
| **/dev**    | 存放设备文件(device)                     |
| **/etc**    | 存放系统配置文件                         |
| /home       | 存放普通用户的主目录                     |
| /lib        | 存放系统库文件                           |
| /lost+found | 存放系统异常产生的文件                   |
| /media      | 自动识别的设备挂载点                     |
| **/mnt**    | 手动挂载的设备挂载点(mount)              |
| /opt        | 存放第三方软件                           |
| **/proc**   | 存放系统和进程信息(process)              |
| /root       | 超级用户的主目录                         |
| /sbin       | 存放与系统环境设置相关的命令             |
| /srv        | 存放服务相关的数据                       |
| /sys        | 存放系统硬件信息                         |
| /tmp        | 存放临时文件                             |
| **/usr**    | 存放系统应用程序(Unix Software Resource) |
| /var        | 存放系统日志(Variable)                   |

/usr 目录及其作用表：

| 目录             | 作用             |
| ---------------- | ---------------- |
| /usr/bin         | 存放系统命令     |
| /usr/lib         | 存放系统库文件   |
| /usr/src         | 存放内核源代码   |
| /usr/sbin        | 存放系统管理命令 |
| /usr/local       | 存放第三方软件   |
| **/usr/include** | 存放头文件       |
| /usr/share       | 存放共享数据     |
| /usr/share/doc   | 存放文档说明     |

/var 目录及其作用表：

| 目录       | 作用                  |
| ---------- | --------------------- |
| /var/log   | 存放系统日志          |
| /var/spool | 存放服务相关数据      |
| /var/run   | 存放服务相关数据(PID) |
| /var/lock  | 存放锁文件            |
| /var/tmp   | 存放临时文件          |
| /var/mail  | 存放邮件              |
| /var/www   | 存放网站相关数据      |

#### 1.1.4 Linux 常用命令

命令格式：`命令 [选项] [参数]`

- 选项一般分为短选项和长选项，短选项使用 `-` 开头，长选项使用 `--` 开头
- 选项可以写在一起，如 `-a -l` 可以写成 `-al`
- 选项和参数可以换位置

`ls` 命令：

| 命令         | 作用                                         |
| ------------ | -------------------------------------------- |
| ls           | 列出目录内容                                 |
| ls -a        | 列出目录内容，包括隐藏文件(以.开头)          |
| ls -l        | 列出目录内容，详细信息                       |
| ls -lh       | 列出目录内容，详细信息，文件大小单位为 K M G |
| ls 目录名    | 列出指定目录内容                             |
| ls -l 文件名 | 列出指定文件信息                             |

文件详细信息：

`-rw-rw-r--  1 linux linux 612418 5月  31  2022 xxx.tar.gz`

从左到右：

- `-` 文件类型 (-dlbcps)

  | 字符 | 文件类型 |
  | ---- | -------- |
  | -    | 普通文件 |
  | d    | 目录     |
  | l    | 链接文件 |
  | b    | 块设备   |
  | c    | 字符设备 |
  | p    | 管道文件 |
  | s    | 套接字   |

- `rw-rw-r--` 文件权限

  | 字符 | 作用                 |
  | ---- | -------------------- |
  | r    | 可读(4)              |
  | w    | 可写(2)              |
  | x    | 可执行(exec)(1)      |
  | -    | 不可读不可写不可执行 |

- `1` 硬链接数
- `linux` 所属用户
- `linux` 所属组
- `612418` 文件大小(单位字节)
- `5月  31  2022` 时间戳，最后修改时间
- `xxx.tar.gz` 文件名

`cd` 命令：

| 命令      | 作用                   |
| --------- | ---------------------- |
| cd        | 切换到当前用户的主目录 |
| cd -      | 切换到上次所在目录     |
| cd ~      | 切换到当前用户的主目录 |
| cd ..     | 切换到上级目录         |
| cd 目录名 | 切换到指定目录         |
| cd /      | 切换到根目录           |

`touch` 命令：创建空文件
如果文件存在，则修改文件的时间戳

`mkdir` 命令：创建目录

- `-p` 递归创建目录 `mkdir -p a/b/c/d/e/f/g`
- `-m` 指定权限 `mkdir -m 777 a`

`rm` 命令：删除文件或目录

- `-r` 递归删除目录 `rm -r dir1`
- `-f` 强制删除，不提示 `rm -f file1`

`cp` 命令：复制文件或目录

- `-r` 递归复制目录 `cp -r dir1 dir2`
- `-p` 保留文件属性 `cp -p file1 file2`

`mv` 命令：移动文件或目录，也可以用来重命名

- `mv file1 file2` 重命名
- `mv file1 dir1` 移动文件

`cat` 命令：查看文件内容

- `-n` 显示行号 `cat -n file1`

`echo` 命令：输出内容(回显)

- `-e` 支持转义字符 `echo -e "hello\nworld"`
- `-n` 不换行 `echo -n "hello"`

`su` 命令：切换用户

- `su root` 切换到 root 用户
- `su - root` 切换到 root 用户，并且切换到 root 用户的主目录

其他常用命令：
| 命令 | 作用 |
| --------- | ---------------------- |
| whomai | 显示当前用户名 |
| clear | 清屏 |
| date | 显示当前时间 |
| cal | 显示当前月份的日历 |
| pwd | 显示当前所在目录 |
| exit | 退出当前用户 |
| history | 查看历史命令 |
| man | 查看命令的帮助信息 |
| which | 查看命令的绝对路径 |

#### 1.1.5 vi/vim 编辑器

vi 是 vim 的前身，vim 是 vi 的升级版

vi/vim 编辑器有三种模式：

- 命令行模式：启动 vi/vim 时进入的模式，可以执行命令
- 插入模式：在命令行模式下按下 `i` 键进入插入模式，可以输入内容
- 底行模式：在命令行模式下按下 `:` 键进入底行模式，可以执行命令

命令行模式下的常用命令：

| 命令   | 作用                                                         |
| ------ | ------------------------------------------------------------ |
| i      | 在光标前插入(insert)                                         |
| I      | 在行首插入                                                   |
| a      | 在光标后插入(append)                                         |
| A      | 在行尾插入                                                   |
| o      | 在光标所在行的下方插入一行                                   |
| O      | 在光标所在行的上方插入一行                                   |
| x      | 删除光标所在位置的字符                                       |
| dd     | 删除光标所在行(delete)                                       |
| ndd    | 删除光标所在行及其下面的 n-1 行                              |
| yy     | 复制光标所在行(copy)                                         |
| nyy    | 复制光标所在行及其下面的 n-1 行                              |
| p      | 在光标所在行的下方粘贴(paste)                                |
| P      | 在光标所在行的上方粘贴                                       |
| gg     | 跳转到文件开头(goto)                                         |
| G      | 跳转到文件末尾                                               |
| ngg    | 跳转到第 n 行                                                |
| /word  | 搜索 word ，回车后跳转到第一个匹配的位置，n 下一个，N 上一个 |
| /^word | 搜索以 word 开头的行                                         |
| /word$ | 搜索以 word 结尾的行                                         |
| u      | 撤销(undo)                                                   |
| ctrl+r | 重做 反撤销(redo)                                            |

底行模式下的常用命令：

| 命令                  | 作用                                              |
| --------------------- | ------------------------------------------------- |
| :w                    | 保存                                              |
| :q                    | 退出                                              |
| :wq                   | 保存并退出                                        |
| :q!                   | 强制退出，不保存                                  |
| :x                    | 保存并退出，如果文件没有修改则不保存              |
| :set nu               | 显示行号                                          |
| :set nonu             | 取消显示行号                                      |
| :set nu！             | 切换行号显示状态                                  |
| :set hlsearch!        | 切换高亮显示状态                                  |
| :noh                  | 取消高亮显示                                      |
| :s/word1/word2        | 当前行 word1 替换 为 word2                        |
| :%s/word1/word2/g     | 替换 word1 为 word2，g 表示全局替换               |
| :%s/word1/word2/gc    | 替换 word1 为 word2，c 表示确认替换               |
| :n1,n2s/word1/word2/g | 替换 n1 到 n2 行的 word1 为 word2，c 表示确认替换 |

### 1.2 C 入门

#### 1.2.1 C 程序的结构

```c
#include <stdio.h>

int main(int argc, const char *argv[])
{
    printf("hello world\n");
    return 0;
}
```

- `#include <stdio.h>`：**预处理指令**，告诉编译器在编译之前先包含 stdio.h 头文件
- `int main()`：主函数，程序的入口，程序从这里开始执行

`#` 在 C 语言中的作用：

1. 预处理指令：告诉编译器在编译之前先执行一些操作。包括：
   - `#include`：包含头文件
   - `#define`：定义宏
   - `#if`：条件编译
   - `#endif`：结束条件编译
   - `#error`：输出错误信息
   - `#pragma`：指定编译器的一些特殊操作
2. 标记符：在宏定义中，`#` 用于**将宏参数转换为字符串**
3. 字符串化：在宏定义中，`##` 用于**将两个宏参数连接成一个字符串**

#### 1.2.2 gcc 编译器

编程语言分为编译型语言和解释型语言：

- 编译型语言：源代码 -> 编译器 -> 机器码 -> 执行
  执行效率较高，但比较依赖编译器的架构或者版本，跨平台性较差
- 解释型语言(脚本语言)：源代码 -> 解释器 -> 执行
  跨平台性较好，但是执行效率较低，解释器逐行解释执行

gcc 是 GNU 编译器套件的 C 语言编译器，可以将 C 语言源代码编译成可执行文件

编译过程：

1. 预处理：处理预处理指令，展开头文件，替换宏定义，删除注释，生成 .i 文件
   `gcc -E hello.c -o hello.i`
2. 编译：语法检查，生成汇编代码，生成 .s 文件
   `gcc -S hello.i -o hello.s`
3. 汇编：将汇编文件生成目标文件(二进制的)，生成 .o 文件
   `gcc -c hello.s -o hello.o`
4. 链接：将目标文件和库文件链接成可执行文件，生成 .out 文件
   `gcc hello.o -o hello.out`

#### 1.2.3 计算机中数据的存储

计算机中数据的存储分为两大部分：数值型数据的存储 和 非数值型数据的存储

- 数值型数据的存储：整型、浮点型、字符型
  数值型数据的表示形式：原码、反码、补码
- 非数值型数据的存储：指针、数组、结构体、共用体、枚举
  非数值型数据的表示形式：地址

进制转换：

- 任何进制转十进制：按权展开求和
- 十进制转二进制：除 2 取余(商为 0 时停止)，逆序排列
- 一位八进制数对应三位二进制数，一位十六进制数对应四位二进制数

```c
a = 0b1010; // 二进制
a = 012; // 八进制 %#o %#O # 表示输出前导符
a = 0xa; // 十六进制 %#x %#X
```

不管几进制的数，最终在计算机中都会转换成二进制来处理。

常见的字符对应的 ascii 码：

- '0' - '9'：48 - 57
- 'A' - 'Z'：65 - 90
- 'a' - 'z'：97 - 122
- '\0'：0
- '\n'：10

#### 1.2.4 数据类型

内存分配的最小单位：字节 byte

数据类型的作用：决定了数据在内存中的分配大小和数据的存储格式

基本数据类型：整型、浮点型、字符型
构造数据类型：数组、结构体、共用体、枚举
指针类型：指针
空类型：void

- 整型：char(1)、short(2)、int(4)、long(4)(32 位)、long long(8)
  其中每种类型又分为 有符号的(signed) 和 无符号的(unsigned)
  有符号的：最高位为符号位，0 表示正数，1 表示负数
  为了解决正负零的问题，实际存储数据是存储的补码:
  (正数的补码是其本身，负数的补码是其反码加 1)
  规定如：10000000 是 -128 (-2^7) 的补码(负数比正数多一个)
  > char 字符类型能存储的数据的范围：
  > 无符号数： 0 ~ 2^8-1
  > 有符号数： -2^7 ~ 2^7-1
- 浮点型(实型)：float(4)、double(8)
  浮点数的存储格式：符号位 + 指数位 + 尾数位
  float：1 + 8 + 23
  double：1 + 11 + 52
  浮点型数据存储的都是近似值。
- 空类型：void(不占用内存空间)
  用于函数的返回值，表示无返回值
  用于函数的参数，表示不接受参数
  **用于指针，表示不指向任何类型的数据**

规则：**存储时看数据(正负)，取出时看类型(有无符号)。**

#### 1.2.5 常量

常量：程序运行过程中，其值不允许发生改变的量

常量的分类：

|  常量类型  | 常量的表示形式 |   举例    |  输出占位符   |
| :--------: | :------------: | :-------: | :-----------: |
|  整型常量  |    10 进制     |    123    |      %d       |
|            |     2 进制     |  0b1010   |      无       |
|            |     8 进制     |   0123    | %o/%O/%#o/%#O |
|            |    16 进制     |   0x123   |      %x       |
| 浮点型常量 |     十进制     |  123.456  |    %f/%lf     |
|            |    指数形式    | 1.23456e2 |     %e/%E     |
| 字符型常量 |     单引号     |    'a'    |      %c       |
| 字符串常量 |     双引号     |  "hello"  |      %s       |

```c
// eg: 将 'M' 转换成 'm'
char ch = 'M' + ('a' - 'A');
// eg: 将 '6' 转换成 6
int num = '6' - '0';
```

每个字符串的结尾都会有一个隐藏的字符 `'\0'` 用来标识字符串结束的
C 语言中对字符串的处理是遇到 `'\0'` 就结束

一般情况下，**宏名都采用大写字母**。eg: `#define PI 3.14`
宏定义的本质是**文本替换**，在预处理阶段就已经完成了替换，不会占用内存空间。

#### 1.2.6 变量

变量：程序运行过程中，其值允许发生改变的量

定义变量的语法：`存储类型 数据类型 变量名 = 初始值;`

- 存储类型：auto(自动)、static(静态)、register(寄存器)、extern(外部)、const(常量)、volatile(易变) [见 C 高级](#2-c-高级) <!-- 这是一个锚点，用于跳转 -->
  局部变量不写存储类型，默认的 auto
- 数据类型：决定了数据在内存中的分配大小和数据的存储格式
- 变量名：是一个标识符
- 初始值：可以省略，省略时变量的值是不确定的

左值和右值：

- 左值：可以出现在赋值运算符左边的值，必须是一个变量
- 右值：可以出现在赋值运算符右边的值，可以是常量、变量、表达式

#### 1.2.7 类型转换

类型转换：将一个数据强制转换成另外一种数据类型

显式类型转换：(数据类型)变量名，强制类型转换
隐式类型转换：自动完成的类型转换，编译器根据上下文自动推导

小的数据类型转换成大的数据类型，不会丢失数据，不需要强制类型转换(隐式)
大的数据类型转换成小的数据类型，可能会丢失数据，编译器报警告，需要强制类型转换(显式)

注意：**强制类型转换不会影响变量自身的类型，变量的类型只和定义时的类型有关。**
注意：**有符号数和无符号数参与运算时，会将有符号数隐式强转成无符号数来参与运算。**

#### 1.2.8 运算符

## 2. C 高级

## 3. 数据结构

## 4. IO 进程线程

## 5. 网络编程

## 6. C++基础

## 7. ARM 体系结构与接口技术

## 8. ARM Linux 驱动开发
